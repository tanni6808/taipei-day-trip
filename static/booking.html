<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Booking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/src/css/style.css" />
    <script>
      (async function () {
        try {
          const token = localStorage.getItem("token");
          if (!token) return (window.location.href = "/");
          const headers = { Authorization: "Bearer " + token };
          const response = await fetch("/api/user/auth", {
            headers,
          });
          const data = await response.json();
          if (data.data === null) return (window.location.href = "/");
        } catch (err) {
          console.log(err);
          window.location.href = "/";
        }
      })();
    </script>
    <script defer src="/script.js"></script>
    <script defer src="https://js.tappaysdk.com/sdk/tpdirect/v5.19.2"></script>
    <script defer src="/booking.js"></script>
  </head>
  <body>
    <nav class="nav">
      <div class="nav__container">
        <h2 class="nav__title"><a href="/">台北一日遊</a></h2>
        <ul class="nav__list">
          <li id="btn-booking">預定行程</li>
          <li>登出系統</li>
        </ul>
      </div>
      <hr />
    </nav>
    <main>
      <div class="container">
        <section class="booking">
          <h4>您好，<span id="user">使用者</span>，待預定的行程如下：</h4>
          <div class="booking__attraction">
            <img src="" alt="attraction" class="booking__attraction-image" />
            <div class="booking__attraction-info">
              <div class="booking__attraction-title bold">
                台北一日遊：<span></span>
              </div>
              <div class="booking__attraction-detail">
                <div class="booking__attraction-detail--label">日期：</div>
                <div class="booking__attraction-detail--date"></div>
              </div>
              <div class="booking__attraction-detail">
                <div class="booking__attraction-detail--label">時間：</div>
                <div class="booking__attraction-detail--time"></div>
              </div>
              <div class="booking__attraction-detail">
                <div class="booking__attraction-detail--label">費用：</div>
                <div class="booking__attraction-detail--price"></div>
              </div>
              <div class="booking__attraction-detail">
                <div class="booking__attraction-detail--label">地點：</div>
                <div class="booking__attraction-detail--address"></div>
              </div>
            </div>
            <img id="btn-delete" src="/src/img/icon/delete.png" alt="delete" />
          </div>
        </section>
        <hr />
        <section class="booking">
          <div class="booking__user-contact-info">
            <h4>您的聯絡資訊</h4>
            <form action="">
              <div class="form">
                <label for="contact-name">聯絡姓名：</label>
                <input type="text" name="contact-name" id="contact-name" />
              </div>
              <div class="form">
                <label for="">連絡信箱：</label>
                <input type="email" name="contact-email" id="contact-email" />
              </div>
              <div class="form">
                <label for="phone-number">手機號碼：</label>
                <input type="text" name="phone-number" id="phone-number" />
              </div>
            </form>
            <div class="caution">
              請保持手機暢通，準時到達，導覽人員將用手機與您聯繫，務必留下正確的連絡方式。
            </div>
          </div>
        </section>
        <hr />
        <section class="booking">
          <div class="booking__payment">
            <h4>信用卡付款資訊</h4>
            <!-- TapPay Field Container  -->
            <form id="tappay">
              <div class="form-group card-number-group">
                <label for="card-number" class="control-label"
                  >卡片號碼：</label
                >
                <div
                  class="tpfield form-control card-number"
                  id="card-number"
                ></div>
              </div>
              <div class="form-group expiration-date-group">
                <label for="expiration-date" class="control-label"
                  >過期時間：</label
                >
                <div
                  class="tpfield form-control expiration-date"
                  id="card-expiration-date"
                ></div>
              </div>
              <div class="form-group ccv-group">
                <label for="ccv" class="control-label">驗證密碼：</label>
                <div class="tpfield form-control ccv" id="card-ccv"></div>
              </div>
            </form>
          </div>
        </section>
        <hr />
        <section class="booking">
          <div class="booking__confirm">
            <div class="caution">總價：新台幣<span>2000</span>元</div>
            <button id="btn-confirm" type="submit" form="tappay" disabled>
              確認訂購並付款
            </button>
          </div>
        </section>
      </div>
    </main>
    <footer class="footer">COPYRIGHT &copy; 2021 台北一日遊</footer>
  </body>
</html>
